{"ast":null,"code":"'use strict';\n/**\n * Helper method that can be bound to a stream - it sets the output to utf-8, captures all of the results, and returns a promise that resolves to the final text.\n * Essentially a smaller version of concat-stream wrapped in a promise\n *\n * @param {Stream} [stream=] optional stream param for when not bound to an existing stream instance\n * @return {Promise}\n */\n\nmodule.exports = function promise(stream) {\n  stream = stream || this;\n  return new Promise(function (resolve, reject) {\n    var results = [];\n    stream.on('data', function (result) {\n      results.push(result);\n    }).on('end', function () {\n      resolve(Buffer.isBuffer(results[0]) ? Buffer.concat(results).toString() : results);\n    }).on('error', reject);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}